---
title: "Top 50 Anime by Popularity"
output:
  rolldown::scrollama_sidebar:
    number_sections: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)

```

```{css}
.header, .sidebar{
  padding: 15px;
}

.sidebar {
  max-width: 70rem;
}

.exhibit {
  border: 2px dotted;
  background-color: rgba(204, 228, 244, 0.4);
}

body {
  background-color: #fcf0e1;
  color: #15425f;
}

.exhibit .figure {
  width: 100%;
  height: 100%;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.exhibit .figure img {
  width: 80%;
  height: 90%;
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top: 10px;
}

.caption {
  font-weight: bold;
  font-size: 110%;
  text-align: center;
  display: block;
  margin-left: 10px;
  margin-right: 10px;
}

.sidebar img, .sidebar .caption {
  display: none;
}
```

```{r data-setup}
library(dplyr)

tidy_anime <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-23/tidy_anime.csv")
```

```{r, results='asis', echo = FALSE}
distinct_anime <- tidy_anime %>% 
  arrange(desc(members)) %>% 
  group_by(animeID) %>% 
  filter(row_number() == 1) %>% 
  head(50)

images_src <- fs::dir_ls("media/images/")

distinct_anime <- cbind(distinct_anime,  img_path = images_src)
```

```{r, results='asis'}
rmarkdown_text = glue::glue_data(distinct_anime,
"# {popularity} - {name}

**(Added to personal list by {scales::comma(members)} members)** 

* Type: {type}  
* Source: {source} 
* Episodes: {episodes}
* Status: {status}
* Score: {score}

### Synopsis 

{synopsis} 

![{title_english} ({title_japanese})]({img_path})


"
)

cat(rmarkdown_text, sep = "\n")
```





